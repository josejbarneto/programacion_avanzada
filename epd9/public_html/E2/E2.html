<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div>
            Tarea: <input id= "tarea" type="text" value="">  Prioridad: <select id="prioridad">
                                                                <option value="Muy alta">Muy alta</option>
                                                                <option value="Alta">Alta</option>
                                                                <option value="Baja">Baja</option>
                                                                <option value="Muy baja">Muy baja</option>
                                                            </select>
            <button onclick="agrega();sortTable();">Agregar</button>
            <br>
            <br>
            Tareas pendientes
            <br>
            <table id="tab" border="1">
                <tr>
                    <td id='num'>1. </td><td>Tarea 1</td><td>Muy alta</td><td><button onclick="this.parentNode.parentNode.remove();"><i class="fa fa-trash"></i></button></td>
                </tr>
                
            </table>
        </div>
        
        <script>
            function agrega(){
                
                
                var table = document.getElementById("tab");
                var row = table.insertRow(0);
                
                var num=document.getElementById("tab").rows.length.toString();
                
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);
                
                cell1.innerHTML = num +=". ";
                cell2.innerHTML = document.getElementById("tarea").value.toString();
                cell3.innerHTML = document.getElementById("prioridad").value.toString();
                cell4.innerHTML = ('<button onclick="this.parentNode.parentNode.remove();"><i class="fa fa-trash"></i></button>');
                
                
            }
            
            function sortTable() {
                var table, rows, switching, i, x, y, shouldSwitch;
                table = document.getElementById("tab");
                switching = true;

                while (switching) {

                  switching = false;
                  rows = table.rows;
                  
                  for (i = 0; i < (rows.length - 1); i++) {

                    shouldSwitch = false;

                    x = rows[i].getElementsByTagName("TD")[2];
                    y = rows[i + 1].getElementsByTagName("TD")[2];

                    if (x.innerHTML==="Muy baja" && (y.innerHTML==="Alta"||y.innerHTML==="Baja"||y.innerHTML==="Muy alta")) {

                      shouldSwitch = true;
                      break;
                    }else if (x.innerHTML==="Baja" && (y.innerHTML==="Alta"||y.innerHTML==="Muy alta")) {

                      shouldSwitch = true;
                      break;
                    }else if (x.innerHTML==="Alta" && (y.innerHTML==="Muy alta")) {

                      shouldSwitch = true;
                      break;
                    }
                  }
                  if (shouldSwitch) {

                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;
                  }
                }
            }
            
        </script>
    </body>
</html>
